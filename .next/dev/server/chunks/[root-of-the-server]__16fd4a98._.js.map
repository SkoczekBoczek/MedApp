{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///Users/nikodemwitkowski/Desktop/WEBSITE/MedApp/app/api/drugs/route.js"],"sourcesContent":["import { MongoClient } from \"mongodb\";\n\nconst client = await MongoClient.connect(process.env.MONGODB_URI);\n\nexport async function GET(req) {\n\ttry {\n\t\tconst { searchParams } = new URL(req.url);\n\t\tconst query = searchParams.get(\"query\");\n\t\tconst limit = parseInt(searchParams.get(\"limit\"));\n\t\tconst skip = parseInt(searchParams.get(\"skip\"));\n\n\t\tconst db = client.db(\"clinicDB\");\n\n\t\tconst regex = new RegExp(query, \"i\");\n\n\t\tconst drugs = await db\n\t\t\t.collection(\"drugs\")\n\t\t\t.find({ productName: { $regex: regex } })\n\t\t\t.skip(skip)\n\t\t\t.limit(limit)\n\t\t\t.toArray();\n\n\t\treturn new Response(JSON.stringify(drugs), {\n\t\t\tstatus: 200,\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t});\n\t} catch (error) {\n\t\treturn new Response(JSON.stringify({ error: \"Błąd połączenia z bazą\" }), {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t});\n\t}\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,SAAS,MAAM,sHAAW,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,WAAW;AAEzD,eAAe,IAAI,GAAG;IAC5B,IAAI;QACH,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;QACxC,MAAM,QAAQ,aAAa,GAAG,CAAC;QAC/B,MAAM,QAAQ,SAAS,aAAa,GAAG,CAAC;QACxC,MAAM,OAAO,SAAS,aAAa,GAAG,CAAC;QAEvC,MAAM,KAAK,OAAO,EAAE,CAAC;QAErB,MAAM,QAAQ,IAAI,OAAO,OAAO;QAEhC,MAAM,QAAQ,MAAM,GAClB,UAAU,CAAC,SACX,IAAI,CAAC;YAAE,aAAa;gBAAE,QAAQ;YAAM;QAAE,GACtC,IAAI,CAAC,MACL,KAAK,CAAC,OACN,OAAO;QAET,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC,QAAQ;YAC1C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;QAC/C;IACD,EAAE,OAAO,OAAO;QACf,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,OAAO;QAAyB,IAAI;YACxE,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;QAC/C;IACD;AACD","debugId":null}}]
}